<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 at 15. Sep 2019 22:30 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190915" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Secured Properties library &#x2013; Example Settings4j</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/brabenetz/secured-properties">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://secured-properties.brabenetz.net" id="bannerLeft">
                <h2>Secured Properties</h2>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://github.com/brabenetz/secured-properties" id="bannerRight">
                                                                                                <img src="images/github-logo-37px.png"  alt="GitHub"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 15. Sep 2019 22:30
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0-beta3
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Secured Properties Library</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                
      <li>
  
                          <a href="configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="changes-report.html" title="Changes">
          <span class="none"></span>
        Changes</a>
            </li>
                
      <li>
  
                          <a href="http://secured-properties.brabenetz.net/archiv/" class="externalLink" title="Archiv">
          <span class="none"></span>
        Archiv</a>
            </li>
                
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                              <li class="nav-header">Examples</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>SpringBoot</a>
          </li>
                
      <li>
  
                          <a href="exampleCommonsConfiguration.html" title="CommonsConfiguration">
          <span class="none"></span>
        CommonsConfiguration</a>
            </li>
                
      <li>
  
                          <a href="exampleSettings4j.html" title="Settings4j">
          <span class="none"></span>
        Settings4j</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="secured-properties.brabenetz.net" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Example Settings4j</h1>
<p>An example how secured-properties can be used with <a class="externalLink" href="https://spring.io/">Spring-Boot</a>.</p>
<ul>
<li><a href="#Description">Description</a></li>
<li><a href="#Implementation_Pattern">Implementation Pattern</a>
<ul>
<li><a href="#Typically_spring-boot_config">Typically spring-boot config</a></li>
<li><a href="#Secured_Properties_Helper">Secured Properties Helper</a></li>
<li><a href="#The_Spring-Boot_Starter_Application">The Spring-Boot Starter Application</a></li>
<li><a href="#Some_Service-Class">Some Service-Class</a></li></ul></li></ul>

<div class="section">
<h2><a name="Description"></a>Description</h2>
<p>Spring-Boot has a nice clear definition <a class="externalLink" href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">how an application should be configured</a>.</p>
<p>typically configurations are place in <tt>file:./application.properties</tt> or <tt>file:./config/application.properties</tt></p>
<p>Limitation: Property-files in classpath cannot be modified, and YAML variants are not supported to auto-encrypt values by secured-properties for now.</p></div>
<div class="section">
<h2><a name="Implementation_Pattern"></a>Implementation Pattern</h2>
<p>It is recommended to create a simple Helper class to initial encrypt values in the propoerty files and decrypt the values on demand where you need it.</p>
<div class="section">
<h3><a name="Typically_spring-boot_config"></a>Typically spring-boot config</h3>
<p>In Spring-Boot you can simpley <a class="externalLink" href="https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor">annotate a simple POJO</a> with <tt>@ConfigurationProperties</tt> for application-configurations</p>
<p>Like the following Example:</p>
<div class="source"><pre class="prettyprint linenums">@Component
@ConfigurationProperties(prefix = &quot;your.app.props&quot;)
public class SpringBootTestProperties {
    private String anotherSecretPassword;
    private String mySecretPassword;

    public String getAnotherSecretPassword() {
        return anotherSecretPassword;
</pre></div>
</div>
<div class="section">
<h3><a name="Secured_Properties_Helper"></a>Secured Properties Helper</h3>
<p>The Helper contains your secured-properties configuration and can be used to initial encrypt unencrypted values in the propoerty files and decrypt the values on demand where you need it.</p>
<div class="source"><pre class="prettyprint linenums">import net.brabenetz.lib.securedproperties.SecuredProperties;
import net.brabenetz.lib.securedproperties.SecuredPropertiesConfig;
import net.brabenetz.lib.securedproperties.core.Encryption;

import java.io.File;

public class SpringBootSecuredPropertiesHelper {
    // Here you should look if you maybe need a custom config:
    private static final SecuredPropertiesConfig config = new SecuredPropertiesConfig();

    // the same property files which are supported by spring-boot:
    private static File[] propertyFiles = new File[] {new File(&quot;./config/application.properties&quot;), new File(&quot;./application.properties&quot;)};

    public static void encryptProperties(String... keys) {
        SecuredProperties.getSecretValues(config, propertyFiles, keys);
    }

    public static String decrypt(String value) {
        if (Encryption.isEncryptedValue(value)) {
            return SecuredProperties.decrypt(config, value);
        }
        return value;
    }

}
</pre></div>
</div>
<div class="section">
<h3><a name="The_Spring-Boot_Starter_Application"></a>The Spring-Boot Starter Application</h3>
<p>A spring-Boot application has a starter-class where you can directly decrypt values in the property-files if needed before it is used by spring.</p>
<div class="source"><pre class="prettyprint linenums">@SpringBootApplication
public class SpringBootStarterApplication {

	public static void main(String[] args) {
        securePasswords();
		SpringApplication.run(SpringBootStarterApplication.class, args);
	}

    private static void securePasswords() {
        // this will encrypt the given properties if there are not already encrypted:
        SpringBootSecuredPropertiesHelper.encryptProperties(
                &quot;your.app.props.my-secret-password&quot;,
                &quot;your.app.props.another-secret-password&quot;);
    }
}
</pre></div>
</div>
<div class="section">
<h3><a name="Some_Service-Class"></a>Some Service-Class</h3>
<p>Now you can decrypt the values of your Properties class whereever you need it.</p>
<div class="source"><pre class="prettyprint linenums">@Service
public class SpringBootTestService {

    @Autowired
    private SpringBootTestProperties testProperties;

    public void runHelloworld() {
        // decrypt the password as late as possible:
        System.out.println(&quot;MySecretPassword: &quot; + SpringBootSecuredPropertiesHelper.decrypt(testProperties.getMySecretPassword()));
    }
}
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016&#x2013;2019
                        <a href="http://brabenetz.net">Brabenetz Harald, Austria</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
